#include "funct.h"

extern volatile uint64_t ticks;


void port_init()
{	
	DDRB |= (1 << PORTB0);    
    DDRD |= (1 << PORTD5);
    DDRC |= (1 << PORTC0) | (1 << PORTC1)| (1 << PORTC2);
	
	
	DDRB |= (1 << clockInput)|(1 << dataInput)|(1 << dataEnable1) | (1 << dataEnable2);
	PORTB |= (1 << dataEnable1) | (1 << dataEnable2);
    
    
    
	
	
}

void timerInit(){
	TCNT0 = 7;                 
	TIMSK |= (1 << TOIE0);    
	TCCR0 |= (1 << CS11)|(1 << CS10);	
    
    
//    TCNT2 = 0;                                           //??????? ????????????? ?????????? 8???
//	TIMSK |= (1 << TOIE2);                               //?????????? ?????????? ???????
//	TCCR2 |= (1 << WGM21)|(1 << COM20)|(1 << CS20);                //????? CTC ???????????? ???? ?? ??????????
//	TCCR2 |= (1 << CS20);                               //|(1 << CS01);	   //???????????? 256

}

uint64_t ticks_ms(){
    uint64_t ticksReturn = 0;
	ATOMIC_BLOCK(ATOMIC_FORCEON){  	
        ticksReturn = ticks;        		
	}
    return ticksReturn;	
}



